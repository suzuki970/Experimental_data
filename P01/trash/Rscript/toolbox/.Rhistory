source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig3.R')
currentLoc
path_toolbox
source('~/Dropbox/Rscript/shaded_error/sample_timeCourse.R')
View(d)
source('~/Dropbox/Rscript/shaded_error/sample_timeCourse.R')
source('~/Dropbox/Rscript/shaded_error/sample_timeCourse.R')
p <- disp(d,config,1,c("groups","groups"))
p
source('~/Dropbox/Rscript/shaded_error/sample_timeCourse.R')
source('~/Dropbox/Rscript/shaded_error/sample_timeCourse.R')
source('~/Dropbox/Rscript/shaded_error/sample_timeCourse.R')
length(corrected_pVal)
p <- p +
geom_point(aes(y=rep(-1,length(corrected_pVal)), x = corrected_pVal), color="gray",shape=15)+
theme(legend.position = 'none')
source('~/Dropbox/Rscript/shaded_error/sample_timeCourse.R')
source('~/Dropbox/Rscript/shaded_error/sample_timeCourse.R')
corrected_pVal
rep(-1,length(corrected_pVal))
p <- p +
geom_line(aes(y=rep(-1,length(corrected_pVal)), x = corrected_pVal), color="gray")+
theme(legend.position = 'none')
p
source('~/Dropbox/Rscript/shaded_error/sample_timeCourse.R')
currentLoc
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
View(subName)
a <- mapply(function(x, y) {return (x + y)}, data_e2[data_e2$Pattern == "Halo",], data_e2[data_e2$Pattern == "Glare",])
a <- mapply(function(x, y) {return (x + y)}, data_e2$data_y[data_e2$Pattern == "Halo",], data_e2$data_y[data_e2$Pattern == "Glare",])
debugSource('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
data_e2$data_y[data_e2$Pattern == "Halo",]
View(data_e2)
View(data_e1)
data_e2 <- data_e2[data_e2$Pattern == "Glare",]
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
View(data_e2)
data_e2$data_y[data_e2$Pattern == "Glare",]
data_e2$data_y[data_e2$Pattern == "Glare"]
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
a
View(data_e2)
data_e2 <- data_e2[data_e2$Pattern == "Glare",]
View(data_e2)
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
View(data_e2)
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
View(data_e2)
fileLoc = "/Users/yuta/Dropbox/MATLAB/Glare2/colorGlareExp/colorGlareExpAdjust/"
dat <- readMat(paste(fileLoc,"data_e2.mat", sep = ""))
fileLoc = "/Users/yuta/Dropbox/MATLAB/P03_GlarePupil/colorGlareExp/experimental_script/colorGlareExpAdjust/"
dat <- readMat(paste(fileLoc,"data_e2.mat", sep = ""))
View(dat)
View(dat)
a=dat[["datRes"]]
View(a)
dat_sd = sd(dat[["datRes"]])
dat_sd
dat_mean
dat_mean = sd(dat[["datRes"]])
dat_sd = sd(dat[["datRes"]])
dat_mean
dat_mean = mean(dat[["datRes"]])
dat_sd = sd(dat[["datRes"]])
View(dat)
numOfTrial = dim(dat$datRes)[1]
numOfSub = length(unique(dat$sub))
sType = rep(1:2,times=c(7,7))
ind_data <- data.frame(
sub =  dat$sub,
data_y = dat$datRes,
Color = dat$condition,
Pattern = sType[dat$condition]
)
ind_data$Color = gColor[ind_data$Color]
ind_data$Color <- factor(ind_data$Color, levels = c("Black","Blue","Cyan","Green","Yellow","Red","Magenta"))
ind_data$Pattern = gPattern[ind_data$Pattern]
gColor <- rep(c("Black","Blue","Cyan","Green","Yellow","Red","Magenta"),2)
gPattern <- c("Glare","Halo")
numOfTrial = dim(dat$datRes)[1]
numOfSub = length(unique(dat$sub))
sType = rep(1:2,times=c(7,7))
ind_data <- data.frame(
sub =  dat$sub,
data_y = dat$datRes,
Color = dat$condition,
Pattern = sType[dat$condition]
)
ind_data$Color = gColor[ind_data$Color]
ind_data$Color <- factor(ind_data$Color, levels = c("Black","Blue","Cyan","Green","Yellow","Red","Magenta"))
ind_data$Pattern = gPattern[ind_data$Pattern]
View(ind_data)
View(ind_data)
a = tapply(ind_data$data_y,list(ind_data$Color,ind_data$Pattern),mean)
View(a)
a = tapply(ind_data$data_y,list(ind_data$sub,ind_data$Color,ind_data$Pattern),mean)
a
dat_mean = tapply(ind_data$data_y,list(ind_data$sub,ind_data$Color,ind_data$Pattern),mean)
dat_sd = tapply(ind_data$data_y,list(ind_data$sub,ind_data$Color,ind_data$Pattern),sd)
dat_sd
View(ind_data)
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/makeDataset.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/makeDataset.R')
matrix(dat_mean,nrow = 1)
dat_mean2 = matrix(dat_mean,nrow = 1)
View(dat_mean2)
dat_mean2 = matrix(dat_mean,ncol = 1)
View(dat_mean2)
dat_mean
View(ind_data)
View(ind_data)
order(ind_data$Color)
order(ind_data$Color && ind_data$Pattern)
order(ind_data$Color, pmax(ind_data$Color, ind_data$Pattern))
order(ind_data$Color, pmax(ind_data$Color, ind_data$Pattern))
View(ind_data)
order(pmax(ind_data$Color, ind_data$Pattern))
View(ind_data)
ind_data$Color <- factor(ind_data$Pattern, levels = gPattern)
order(pmax(ind_data$Color, ind_data$Pattern))
View(ind_data)
source('~/Dropbox/Rscript_working/P03_glare_pupil/makeDataset.R')
order(pmax(ind_data$Color, ind_data$Pattern))
gPattern
order(ind_data$data_y, pmax(ind_data$Color, ind_data$Pattern))
View(ind_data)
order(ind_data$Pattern, pmax(ind_data$Color, ind_data$Pattern))
View(ind_data)
source('~/Dropbox/Rscript_working/P03_glare_pupil/makeDataset.R')
View(ind_data)
dat_mean = tapply(ind_data$data_y,list(ind_data$sub,ind_data$Color,ind_data$Pattern),mean)
dat_sd = tapply(ind_data$data_y,list(ind_data$sub,ind_data$Color,ind_data$Pattern),sd)
dat_mean2 = matrix(dat_mean,ncol = 1)
dat_mean2
14*16
numOfTrial
numOfTrial/numOfSub
numOfTrial
numOfTrial
4*numOfSub
8*numOfSub
8*numOfSub*14
14*numOfSub
dat_mean2 = rep(dat_mean2,times = rep(8,14*numOfSub))
ind_data$dat_mean = rep(dat_mean2,times = rep(8,14*numOfSub))
source('~/Dropbox/Rscript_working/P03_glare_pupil/makeDataset.R')
View(ind_data)
source('~/Dropbox/Rscript_working/P03_glare_pupil/makeDataset.R')
View(ind_data)
source('~/Dropbox/Rscript_working/P03_glare_pupil/makeDataset.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/makeDataset.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/makeDataset.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/makeDataset.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/makeDataset.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/makeDataset.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/makeDataset.R')
View(ind_data)
source('~/Dropbox/Rscript_working/P03_glare_pupil/makeDataset.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/makeDataset.R')
View(ind_data)
ind_data$data_y
source('~/Dropbox/Rscript_working/P03_glare_pupil/makeDataset.R')
View(ind_data)
ind_data[ind_data$data_y < ind_data$maxsd && ind_data$data_y > ind_data$minsd]
ind_data$maxsd
ind_data[ind_data$data_y < ind_data$maxsd]
View(ind_data)
ind_data[ind_data$data_y == ind_data$maxsd]
ind_data[ind_data$data_y > ind_data$maxsd]
ind_data[ind_data$data_y != ind_data$maxsd]
ind_data[ind_data$data_y > ind_data$maxsd,]
ind_data = ind_data[ind_data$data_y < ind_data$maxsd && ind_data$data_y > ind_data$minsd,]
source('~/Dropbox/Rscript_working/P03_glare_pupil/makeDataset.R')
View(ind_data)
source('~/Dropbox/Rscript_working/P03_glare_pupil/makeDataset.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/makeDataset.R')
View(data_e2)
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/makeDataset.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/makeDataset.R')
View(combine_plots.vertical)
source('~/Dropbox/Rscript_working/P03_glare_pupil/makeDataset.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/makeDataset.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/makeDataset.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/makeDataset.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
View(data_e2)
source('~/Dropbox/Rscript_working/P03_glare_pupil/makeDataset.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/makeDataset.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/makeDataset.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
View(data_e2)
View(data_e2_ave)
View(data_e2_ave)
data_e2_meanCol = aggregate( data_afy ~ Pattern, data = data_e2_ave, FUN = "mean")
View(data_e2_meanCol)
data_e2_sdCol = aggregate( data_afy ~ Pattern, data = data_e2_ave, FUN = "sd")
View(data_e2_sdCol)
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
View(data_e2_meanCol)
View(data_e2_sdCol)
View(data_e2_meanCol)
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
data_e2_sdCol
SE_min
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
p = setBarFigureStyle(p)
p
p <- p + theme(
legend.position = 'none',
axis.ticks.x = element_blank(),
axis.text.x = element_text(angle = 30, hjust = 1),
axis.line.x = element_blank()
)
print(p)
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
View(data_e2_ave)
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
load(paste(currentLoc,"/dataset_e2.rda", sep = ""))
data_e2 <- subset(data_e2, sub != 7 & sub != 8 & sub != 13)
load(paste(currentLoc,"/dataset_e1.rda", sep = ""))
data_e1 = aggregate( data_y ~ sub*Color*Pattern, data = data_e1, FUN = "mean")
data_e1 <- subset(data_e1, sub != 7 & sub != 13 & sub < 18)
subName = NULL
for( i in seq(max(data_e1$sub))){ subName = rbind(subName,paste("s", i, sep = ""))}
data_e1$sub = subName[data_e1$sub]
data_e2$sub = subName[data_e2$sub]
data_e2$PLR <- data_e1$data_y
# data_e2 <- subset(data_e2, sub == 2 | sub == 3 | sub == 4 | sub == 5 | sub == 17)
# data_e2$PLR <- data_e1$data_y - data_e1$data_y[data_e1$Pattern == "Halo"]
# data_e2$data_afy <- data_e2$data_afy - data_e2$data_afy[data_e2$Pattern == "Halo"]
config = list(lim_x = c(-20, 40),
lim_y = c(-0.6, 0.85),
stride = c(-0.8,-0.6,-0.4,-0.2,-0.0,0.2,0.4,0.6,0.8),
alpha_val = 0.7,
label_x = "Adjusted luminance score [%]",
label_y = "Pupil Changes [mm]",
grCol= c("Black","Blue","Cyan","Green","Magenta","Red","Yellow"))
# t <- mapply(function(x, y) {return (x  y)}, data_e2$PLR[data_e2$Pattern == "Glare"], data_e2$PLR[data_e2$Pattern == "Halo"])
data_e2 <- data_e2[data_e2$Pattern == "Glare",]
# data_e2$PLR = t
lm = lmer(PLR ~ data_afy + (1+data_afy|sub), data = data_e2)
print(paste("y = ", round(summary(lm)$coefficients[2,"Estimate"], digits = 4),
"x + ", round(summary(lm)$coefficients[1,"Estimate"], digits = 4),
", t = ", round(summary(lm)$coefficients[2,"t value"], digits = 4),
", p = ", round(summary(lm)$coefficients[2,"Pr(>|t|)"], digits = 4),sep=""))
# print(summary(lm))
# Data frame to evaluate average effects predictions on
newavg <- data.frame(data_afy = config$lim_x[1]:config$lim_x[2])
newavg$reaction <- predict(lm, re.form = NA, newavg)
p <- ggplot() +
geom_line(data = newavg,aes(x = data_afy,y=reaction), col = "black", size = 1) +
geom_point(data = data_e2, alpha = config$alpha_val,
aes(x = data_afy, y = PLR, colour = Color, fill = Color), size = 2) +
scale_color_manual(values = config$gr) +
xlab(config$label_x) + ylab(config$label_y) +
# ggtitle(paste("R = ", round(corR$estimate[[1]],digits = 3),", p = ", round(corR$p.value[[1]],digits = 3), sep = "")) +
coord_cartesian(xlim=config$lim_x) +
scale_y_continuous(breaks = config$stride,expand = c(0.1, 0)) +
scale_x_continuous(breaks = seq(config$lim_x[1],config$lim_x[2],10),expand = c(0, 0))
# p <- p + facet_grid(. ~ Pattern)
p <- setFigureStyle(p)
p <- p + theme(
legend.position = 'none',
axis.line.x = element_blank(),
axis.line.y = element_blank()
)
# print(p)
# p2 = p
eval(parse(text=paste("p", countFigNum ,"=p", sep="")))
countFigNum = countFigNum+1
p
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig4.R')
currentLoc
root
source('~/Dropbox/1Rscript_working/P03_glare_pupil/showFig3.R')
source('~/Dropbox/Rscript_working/P03_glare_pupil/showFig3.R')
